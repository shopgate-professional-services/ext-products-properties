{
  "version": "1.0.2",
  "id": "@shopgate-project/products-properties",
  "components": [
    {
      "id": "ProductProperties",
      "path": "frontend/portals/ProductProperties",
      "target": [
        "product-item.name.before",
        "product-item.name.after",
        "product-item.price.before",
        "product-item.price.after"
      ],
      "type": "portals"
    },
    {
      "id": "ProductPropertiesPdp",
      "path": "frontend/portals/ProductPropertiesPdp",
      "target": [
        "product.header.before",
        "product.header.after",
        "product.name.before",
        "product.name.after",
        "product.info.before",
        "product.info.after",
        "product.stock-info.before",
        "product.stock-info.after",
        "product.price-info.before",
        "product.price-info.after"
      ],
      "type": "portals"
    },
    {
      "id": "ProductPropertiesFav",
      "path": "frontend/portals/ProductPropertiesFav",
      "target": [
        "favorites.product-name.before",
        "favorites.product-name.after",
        "favorites.product-price.before",
        "favorites.product-price.after"
      ],
      "type": "portals"
    },
    {
      "id": "ProductPropertiesCart",
      "path": "frontend/portals/ProductPropertiesCart",
      "target": [
        "cart.item.name.before",
        "cart.item.name.after",
        "cart.item.price.before",
        "cart.item.price.after"
      ],
      "type": "portals"
    }
  ],
  "configuration": {
    "addProperties": {
      "type": "admin",
      "destination": "backend",
      "default": null,
      "params": {
        "type": "json",
        "label": "List of properties to add in json format (array of strings)",
        "required": false,
        "options": {
          "placeholder": {
            "en": "Weight,Width,Height"
          }
        }
      }
    },
    "apiCredentials": {
      "type": "bigApiCredentials",
      "destination" : "backend"
    },
    "productsProperties": {
      "type": "admin",
      "destination": "both",
      "default": null,
      "params": {
        "type": "json",
        "label": "Configuration to show properties at given portal positions"
      }
    }
  },
  "steps": [
    {
      "path": "extension/addProperties.js",
      "hooks": [
        "shopgate.catalog.getProducts.v1:afterFetchProducts",
        "shopgate.catalog.getProductsByIds.v1:afterFetchProducts"
      ],
      "input": [
        {
          "key": "products"
        }
      ],
      "output": [
        {
          "key": "products"
        }
      ]
    },
    {
      "path": "extension/addPropertiesToGetProduct.js",
      "hooks": ["shopgate.catalog.getProduct.v1:afterFetchProducts"],
      "input": [
        {
          "key": "products"
        }
      ],
      "output": [
        {
          "key": "additionalProperties",
          "addPipelineOutput": true
        }
      ]
    },
    {
      "path": "extension/addPropertiesToVariants.js",
      "hooks": ["shopgate.catalog.getProductVariants.v1:after"],
      "input": [{ "key": "products" }],
      "output": [{ "key": "products" }]
    },
    {
      "path": "extension/addPropertiesToCartItems.js",
      "hooks": ["shopgate.cart.getCart.v1:after"],
      "input": [{ "key": "cartItems" }],
      "output": [{ "key": "cartItems" }]
    }
  ]
}
